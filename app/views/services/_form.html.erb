<%= form_with(model: service, local: true) do |form| %>
  <% if service.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(service.errors.count, "error") %> prohibited this service from being saved:</h2>

      <ul>
        <% service.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field form-group">
    <%= form.label :title %>
    <%= form.text_field :title, autofocus: true, placeholder: "Title of service", class: "form-control" %>
  </div>

  <div class="field form-group">
  <%= form.label :meta_description, id: "meta-word-label" %>
    <%= form.text_area :meta_description, placeholder: "Meta description [ror_town] for placeholder", class: "form-control" , id:"meta-word-text" %>
  </div>

    <div class= "image-preview" id="featured-preview" style='background-image: url(<%="#{mobile_small_image(service.featured_image)}" if service.featured_image.attachment%>)'> 

    <%= form.label :featured_image, "Click to Change Image For Masthead"%> 
    <%= form.file_field :featured_image, class: "d-none"%>
  </div>


    <div class= "image-preview" id="image-preview" style='background-image: url(<%="#{mobile_small_image(service.image)}" if service.image.attachment%>)'>


    <%= form.label :image, "Click to Change Image For Bottom of Page"%>
    <%= form.file_field :image, class: "d-none" %>
  </div>

  <div class="form-group">
    <% form.label :content_images, class: "content-image-input"%> <!--  <- Not Shown Here in case of revert -->
    <label class="content-image-input mt-5 border border-primary .primary rounded p-2 bg-light text-dark" for="service_content_images">
      <span class="bg-dark text-warning p-1 d-inline-block w-100 text-center">Warning: Uploading new images will overwrite all images below.</span>
      <h3 class="font-weight-light text-center text-lg-left mt-4 mb-0">Content Image Gallery</h3>
      <p>Images can be added to editor below by clicking insert</p>
      <hr class="mt-2 mb-5">
      <div class="container">
          <div class="row text-center text-lg-left">
            <%service.content_images.attachments.each do |image|%>
              <%if image%>
                <div class="col-lg-3 col-md-4 col-6">
                  <figure class="figure">
                    <img class="img-fluid img-thumbnail" src="<%=desktop_small_image(image)%>" alt="">
                    <figcaption class="figure-caption"><%=image.filename%></figcaption>
                  </figure>
                </div>
                <div class="row text-center text-lg-left">
                  <span style="display: none;" class="content-images" data-name="<%=image.filename%>" data-image="<%=desktop_small_image(image)%>"></span>
                  </div>
                <%end%>
              <%end%>
              </div>
          </div>
          <div class="text-center my-4 cursor-pointer">
            <i class="fas fa-plus-circle fa-2x text-center"></i>
          </div>
    </label>
    <%= form.file_field :content_images, multiple: true, class: "d-none" %>
  </div>
  

  <div class="field">
    <%= form.label :content, "Content suggested minimum 350 words"%>
    <%= form.text_area :content, class: "tiny" %>
  </div>

  <h3 class='pt-3'>Main Service Content Not For Individual Towns</h3>
  <hr />
  <div class="field form-group">
    <%= form.label :main_meta, id: "meta-main-word-label" %>
    <%= form.text_area :main_meta, placeholder: "Main page meta description", class: "form-control" , id:"meta-main-word-text" %>
  </div>

  <div class="field">
    <%= form.label :main_content, "Content suggested minimum 350 words"%>
    <%= form.text_area :main_content, class: "tiny" %>
  </div>


    <div class="field form-group">
      <%= form.label :business_type_id %>
      <%= form.collection_select(:business_type_id, BusinessType.all, :id, :name, {prompt: true},  {class: "form-control"})%>
    </div>

    <div class="actions">
      <%= form.submit class: "btn btn-primary mb-3" %>
    </div>
  </div>
<% end %>



<%= javascript_pack_tag 'servicesView' %>
